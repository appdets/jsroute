(()=>{"use strict";const t=new class{states={default:"/",routes:{},componentAttribute:"data-content",fallback:"fallback",shownDisplay:"inherit",hiddenDisplay:"none"};debug=!1;log=(...t)=>{this.debug&&console.log("%cRouter","background: olive; color: white; padding: 2px 4px; font-size: 9px;",...t)};getRoutes=()=>this.states.routes||{};init=()=>{this.hideScreens(),this.registerEvents(),window.location.hash=this.states.default,this.routeUpdated(),Object.freeze(this.states),document.dispatchEvent(new CustomEvent("JSRoute.init",{detail:{route:this.currentRoute}}))};hideScreens(){let t=document.querySelectorAll("["+this.states.componentAttribute+"]");t&&(t.forEach((t=>{t.style.display=this.states.hiddenDisplay})),this.log("Hidden all screens",t))}setRoute=t=>{let e=this.getRoute(t);e?(this.log("Route matched",e),"title"in e&&e.title&&this.setDocumentTitle(e.title),this.showCurrentScreen(e)):this.log("Route not matched",e)};registerEvents=()=>{window.addEventListener("hashchange",this.routeUpdated)};routeUpdated=t=>{this.log("Current route",this.getCurrentHash()),this.setRoute(this.getCurrentHash())};makeSelector=t=>"["+this.states.componentAttribute+"='"+t+"']";showCurrentScreen=t=>{let e=null;"selector"in t&&t.selector&&(e=document.querySelector(t.selector)),e||(e=document.querySelector(this.makeSelector(this.trim(t.path)))),e||(e=document.querySelector(this.makeSelector(this.format(t.path)))),e?(this.hideScreens(),e.style.display=this.states.shownDisplay,document.dispatchEvent(new CustomEvent("JSRoute.change",{detail:{route:t}}))):(e=document.querySelector(this.makeSelector(this.states.fallback)),e&&(this.hideScreens(),e.style.display=this.states.shownDisplay,document.dispatchEvent(new CustomEvent("JSRoute.error",{detail:{route:t}})))),this.log(t)};getRoute=t=>{let e=Object.keys(this.getRoutes()).map((t=>this.trim(t)));if(e){let s=e.find((e=>{let s=new RegExp(e);return s.test(t)||s===e})),i=this.states.routes[this.trim(s)]||this.states.routes[this.format(s)];if(i)return{path:this.trim(t),registered:0!=i,title:i.title,selector:i.selector||null}}return{path:this.trim(t),registered:!1,title:null,selector:null}};getCurrentHash=()=>{let t=window.location.hash;return t?(t=t.toString().replace("#",""),this.trim(t)):"/"};currentRoute=()=>this.getRoute(this.getCurrentHash());format=t=>t?(t.startsWith("/")||(t="/"+t),t.endsWith("/")&&(t=t.slice(-1)),t||"/"):"/";trim=t=>t?(t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(-1)),t||"/"):"/";setDocumentTitle=t=>{let e=document.querySelector("title");e&&(e.innerHTML=t)};use=t=>(t=Object.assign(this.states,t),this.log(t),this.states=t,this);route=t=>(t=this.trim(t.toString()),window.location.hash=t,this);debug=(t=!0)=>(this.debug=t,this)};window.JSRoute=t})();